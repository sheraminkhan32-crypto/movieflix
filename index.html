<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MovieFlix Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body { background-color: #000; color: #fff; font-family: sans-serif; overflow: hidden; }
        .page { display: none; height: 100vh; overflow-y: auto; padding-bottom: 90px; }
        .page.active { display: block; }
        .active-red { color: #ef4444 !important; }
    </style>
</head>
<body>

    <div class="p-4 flex justify-between items-center sticky top-0 bg-black z-50 border-b border-gray-900">
        <h1 class="text-red-600 text-3xl font-black italic">MOVIEFLIX</h1>
        <i class="fas fa-search text-xl" onclick="toggleSearch()"></i>
    </div>

    <div id="searchBar" class="hidden p-4 bg-gray-900 sticky top-[73px] z-40">
        <input type="text" id="searchInput" onkeyup="realSearch()" placeholder="Search Movie or Channel Name..." class="w-full bg-black p-3 rounded-lg border border-red-600 outline-none">
    </div>

    <div id="homePage" class="page active p-4 space-y-6">
        <div id="movieList" class="space-y-6">
            <div class="movie-item bg-gray-900 rounded-2xl overflow-hidden border border-gray-800" data-name="Sher Amin Action">
                <div onclick="playVideo('https://files.catbox.moe/u08bka.mp4')">
                    <img src="https://images.unsplash.com/photo-1536440136628-849c177e76a1?w=800" class="w-full h-48 object-cover opacity-60">
                </div>
                <div class="p-4 flex justify-between items-center">
                    <h3 class="movie-title font-bold text-lg">Sher Amin Action</h3>
                    <button onclick="downloadVideo('https://files.catbox.moe/u08bka.mp4')" class="bg-red-600 px-4 py-2 rounded-full text-white text-sm font-bold flex items-center gap-2">
                        <i class="fas fa-download"></i> Save
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div id="shortsPage" class="page bg-black !p-0">
        <div id="shortsList" class="h-full">
            <div class="h-full w-full relative flex items-center justify-center bg-gray-900">
                <video loop class="h-full w-full object-cover" onclick="this.paused ? this.play() : this.pause()">
                    <source src="https://files.catbox.moe/u08bka.mp4" type="video/mp4">
                </video>
                <div class="absolute right-4 bottom-32 flex flex-col gap-8 text-3xl text-white items-center">
                    <i class="fas fa-heart" onclick="this.classList.toggle('active-red')"></i>
                    <i class="fas fa-download text-red-600" onclick="downloadVideo('https://files.catbox.moe/u08bka.mp4')"></i>
                    <i class="fas fa-share" onclick="navigator.share({url: window.location.href})"></i>
                </div>
            </div>
        </div>
    </div>

    <div id="uploadPage" class="page p-6">
        <h2 class="text-2xl font-bold mb-6 text-red-600">Upload Content</h2>
        <input type="text" id="vLink" placeholder="Paste .mp4 Link" class="w-full bg-gray-900 p-4 rounded-xl mb-4 border border-gray-700 outline-none">
        <input type="text" id="vTitle" placeholder="Video Title / Channel Name" class="w-full bg-gray-900 p-4 rounded-xl mb-4 border border-gray-700 outline-none">
        <button onclick="uploadEverything()" class="w-full bg-red-600 py-4 rounded-xl font-bold">POST TO CHANNEL</button>
    </div>

    <div id="channelPage" class="page p-6">
        <div class="text-center mb-6">
            <div class="w-20 h-20 bg-red-600 rounded-full mx-auto mb-2 flex items-center justify-center text-3xl font-bold">S</div>
            <h2 class="text-xl font-bold" id="chanNameDisplay">My Channel</h2>
        </div>
        <h3 class="font-bold border-b border-gray-800 pb-2 mb-4 text-gray-400">Videos</h3>
        <div id="userVideos" class="grid grid-cols-3 gap-1"></div>
    </div>

    <div id="playerBox" class="fixed inset-0 bg-black z-[100] hidden flex flex-col">
        <button onclick="closeVideo()" class="p-4 text-red-600 font-bold">âœ• CLOSE PLAYER</button>
        <video id="mainVideo" controls class="w-full my-auto"><source src="" type="video/mp4"></video>
    </div>

    <div class="fixed bottom-0 w-full bg-black border-t border-gray-900 flex justify-around items-center py-4 z-50">
        <div onclick="showPage('homePage')"><i class="fas fa-home text-xl"></i></div>
        <div onclick="showPage('shortsPage')"><i class="fas fa-bolt text-xl"></i></div>
        <div onclick="showPage('uploadPage')" class="bg-red-600 h-12 w-12 rounded-full flex items-center justify-center -mt-10 border-4 border-black"><i class="fas fa-plus"></i></div>
        <div onclick="showPage('channelPage')"><i class="fas fa-user-circle text-xl"></i></div>
    </div>

    <script>
        function showPage(id) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(id).classList.add('active');
        }

        function toggleSearch() { document.getElementById('searchBar').classList.toggle('hidden'); }

        function realSearch() {
            let val = document.getElementById('searchInput').value.toLowerCase();
            let movies = document.getElementsByClassName('movie-item');
            for(let m of movies) {
                let name = m.getAttribute('data-name').toLowerCase();
                m.style.display = name.includes(val) ? "block" : "none";
            }
        }

        function downloadVideo(url) {
            const link = document.createElement('a');
            link.href = url;
            link.target = '_blank';
            link.download = 'movieflix_video.mp4';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        function uploadEverything() {
            let url = document.getElementById('vLink').value;
            let title = document.getElementById('vTitle').value || "New Video";
            if(!url) return;

            document.getElementById('chanNameDisplay').innerText = title;

            // Add to Home
            const movieList = document.getElementById('movieList');
            const card = document.createElement('div');
            card.className = "movie-item bg-gray-900 rounded-2xl overflow-hidden border border-gray-800";
            card.setAttribute('data-name', title);
            card.innerHTML = `<div onclick="playVideo('${url}')"><div class="h-40 bg-gray-800 flex items-center justify-center"><i class="fas fa-play text-3xl"></i></div></div>
                              <div class="p-3 flex justify-between items-center"><span class="font-bold">${title}</span><button onclick="downloadVideo('${url}')" class="text-red-600"><i class="fas fa-download"></i></button></div>`;
            movieList.prepend(card);

            // Add to Channel
            const userVids = document.getElementById('userVideos');
            const thumb = document.createElement('div');
            thumb.className = "h-24 bg-gray-800 rounded flex items-center justify-center border border-gray-700";
            thumb.onclick = () => playVideo(url);
            thumb.innerHTML = `<i class="fas fa-play opacity-30"></i>`;
            userVids.prepend(thumb);

            showPage('channelPage');
        }

        function playVideo(url) {
            document.getElementById('mainVideo').src = url;
            document.getElementById('playerBox').classList.remove('hidden');
            document.getElementById('mainVideo').play();
        }

        function closeVideo() {
            document.getElementById('playerBox').classList.add('hidden');
            document.getElementById('mainVideo').pause();
        }
    </script>
</body>
</html>
