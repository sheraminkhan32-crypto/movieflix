<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MovieFlix Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body { background-color: #000; color: #fff; font-family: sans-serif; overflow: hidden; }
        .page { display: none; height: 100vh; overflow-y: auto; padding-bottom: 90px; }
        .page.active { display: block; }
        /* Splash Screen Style */
        #splash {
            position: fixed;
            inset: 0;
            background: #000;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }
    </style>
</head>
<body>

    <div id="splash">
        <h1 class="text-red-600 text-5xl font-black italic mb-4">MOVIEFLIX</h1>
        <div class="w-32 h-1 bg-gray-800 relative overflow-hidden">
            <div class="absolute h-full bg-red-600 w-1/2 animate-[load_1.5s_infinite]"></div>
        </div>
        <style>@keyframes load { 0% { left: -100%; } 100% { left: 100%; } }</style>
    </div>

    <div class="p-4 flex justify-between items-center sticky top-0 bg-black z-50 border-b border-gray-900">
        <h1 class="text-red-600 text-3xl font-black italic">MOVIEFLIX</h1>
        <i class="fas fa-search text-xl" onclick="toggleSearch()"></i>
    </div>

    <div id="searchBar" class="hidden p-4 bg-gray-900 sticky top-[73px] z-40">
        <input type="text" id="searchInput" onkeyup="realSearch()" placeholder="Search..." class="w-full bg-black p-3 rounded-lg border border-red-600 outline-none">
    </div>

    <div id="homePage" class="page active p-4 space-y-6">
        <div id="movieList" class="space-y-6">
            <div class="movie-item bg-gray-900 rounded-2xl overflow-hidden border border-gray-800" data-name="Sher Amin Action">
                <div onclick="playVideo('https://files.catbox.moe/u08bka.mp4')">
                    <img src="https://images.unsplash.com/photo-1536440136628-849c177e76a1?w=800" class="w-full h-48 object-cover opacity-60">
                </div>
                <div class="p-4 flex justify-between items-center">
                    <h3 class="movie-title font-bold text-lg">Sher Amin Action</h3>
                    <button onclick="downloadVideo('https://files.catbox.moe/u08bka.mp4')" class="bg-red-600 px-4 py-2 rounded-full text-white text-sm font-bold flex items-center gap-2">
                        <i class="fas fa-download"></i> Save
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div id="shortsPage" class="page bg-black !p-0">
        <div id="shortsList" class="h-full">
            <div class="h-full w-full relative flex items-center justify-center bg-gray-900">
                <video loop class="h-full w-full object-cover" onclick="this.paused ? this.play() : this.pause()">
                    <source src="https://files.catbox.moe/u08bka.mp4" type="video/mp4">
                </video>
                <div class="absolute right-4 bottom-32 flex flex-col gap-8 text-3xl text-white items-center">
                    <i class="fas fa-heart" onclick="this.classList.toggle('text-red-600')"></i>
                    <i class="fas fa-download text-red-600" onclick="downloadVideo('https://files.catbox.moe/u08bka.mp4')"></i>
                    <i class="fas fa-share" onclick="navigator.share({url: window.location.href})"></i>
                </div>
            </div>
        </div>
    </div>

    <div id="uploadPage" class="page p-6">
        <h2 class="text-2xl font-bold mb-6 text-red-600">Upload Content</h2>
        <input type="text" id="vLink" placeholder="Paste .mp4 Link" class="w-full bg-gray-900 p-4 rounded-xl mb-4 border border-gray-700 outline-none text-white">
        <input type="text" id="vTitle" placeholder="Video Title" class="w-full bg-gray-900 p-4 rounded-xl mb-4 border border-gray-700 outline-none text-white">
        <button onclick="uploadEverything()" class="w-full bg-red-600 py-4 rounded-xl font-bold">POST TO CHANNEL</button>
    </div>

    <div id="channelPage" class="page p-6">
        <div class="text-center mb-6 relative">
            <div class="w-20 h-20 bg-red-600 rounded-full mx-auto mb-2 flex items-center justify-center text-3xl font-bold" id="userInitial">S</div>
            <div class="flex items-center justify-center gap-2">
                <h2 class="text-xl font-bold" id="chanNameDisplay">My Channel</h2>
                <i class="fas fa-pen text-sm text-gray-500" onclick="toggleEditModal()"></i>
            </div>
        </div>
        <div id="userVideos" class="grid grid-cols-3 gap-1"></div>
    </div>

    <div id="editNameModal" class="fixed inset-0 z-[200] hidden flex items-center justify-center p-6 bg-black/90">
        <div class="bg-gray-900 p-6 rounded-2xl w-full border border-gray-700">
            <h3 class="text-lg font-bold mb-4">Update Channel Name</h3>
            <input type="text" id="newNameInput" placeholder="Enter name" class="w-full bg-black p-3 rounded mb-4 border border-gray-700 text-white outline-none">
            <div class="flex gap-2">
                <button onclick="saveNewName()" class="flex-1 bg-red-600 py-2 rounded font-bold">Save</button>
                <button onclick="toggleEditModal()" class="flex-1 bg-gray-700 py-2 rounded font-bold">Cancel</button>
            </div>
        </div>
    </div>

    <div id="playerBox" class="fixed inset-0 bg-black z-[300] hidden flex flex-col">
        <button onclick="closeVideo()" class="p-4 text-red-600 font-bold">âœ• CLOSE</button>
        <video id="mainVideo" controls class="w-full my-auto"><source src="" type="video/mp4"></video>
    </div>

    <div class="fixed bottom-0 w-full bg-black border-t border-gray-900 flex justify-around items-center py-4 z-50">
        <div onclick="showPage('homePage')"><i class="fas fa-home text-xl"></i></div>
        <div onclick="showPage('shortsPage')"><i class="fas fa-bolt text-xl"></i></div>
        <div onclick="showPage('uploadPage')" class="bg-red-600 h-12 w-12 rounded-full flex items-center justify-center -mt-10 border-4 border-black"><i class="fas fa-plus"></i></div>
        <div onclick="showPage('channelPage')"><i class="fas fa-user-circle text-xl"></i></div>
    </div>

    <script>
        // Splash Screen Timer
        setTimeout(() => { document.getElementById('splash').style.display = 'none'; }, 2500);

        function showPage(id) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(id).classList.add('active');
        }

        function toggleSearch() { document.getElementById('searchBar').classList.toggle('hidden'); }
        function toggleEditModal() { document.getElementById('editNameModal').classList.toggle('hidden'); }

        function saveNewName() {
            let name = document.getElementById('newNameInput').value;
            if(name) {
                document.getElementById('chanNameDisplay').innerText = name;
                document.getElementById('userInitial').innerText = name.charAt(0).toUpperCase();
                toggleEditModal();
            }
        }

        function downloadVideo(url) { window.open(url, '_blank'); }

        function uploadEverything() {
            let url = document.getElementById('vLink').value;
            let title = document.getElementById('vTitle').value || "New Video";
            if(!url) return;
            const movieList = document.getElementById('movieList');
            const card = document.createElement('div');
            card.className = "movie-item bg-gray-900 rounded-2xl overflow-hidden border border-gray-800";
            card.setAttribute('data-name', title);
            card.innerHTML = `<div onclick="playVideo('${url}')"><div class="h-40 bg-gray-800 flex items-center justify-center"><i class="fas fa-play text-3xl"></i></div></div>
                              <div class="p-3 flex justify-between items-center"><span class="font-bold">${title}</span><button onclick="downloadVideo('${url}')" class="text-red-600"><i class="fas fa-download"></i></button></div>`;
            movieList.prepend(card);
            const userVids = document.getElementById('userVideos');
            const thumb = document.createElement('div');
            thumb.className = "h-24 bg-gray-800 rounded border border-gray-700 flex items-center justify-center";
            thumb.onclick = () => playVideo(url);
            thumb.innerHTML = `<i class="fas fa-play opacity-20 text-xs"></i>`;
            userVids.prepend(thumb);
            document.getElementById('vLink').value = "";
            showPage('channelPage');
        }

        function playVideo(url) { document.getElementById('mainVideo').src = url; document.getElementById('playerBox').classList.remove('hidden'); document.getElementById('mainVideo').play(); }
        function closeVideo() { document.getElementById('playerBox').classList.add('hidden'); document.getElementById('mainVideo').pause(); }

        function realSearch() {
            let val = document.getElementById('searchInput').value.toLowerCase();
            let movies = document.getElementsByClassName('movie-item');
            for(let m of movies) {
                let name = m.getAttribute('data-name').toLowerCase();
                m.style.display = name.includes(val) ? "block" : "none";
            }
        }
    </script>
</body>
</html>
